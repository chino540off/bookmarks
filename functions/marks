#!/usr/bin/env zsh

autoload -Uz @bookmark_colorize

local bookmark_file="$(<"$BOOKMARKS_FILE")"
local bookmark_path
local bookmark_name

if [[ -n "$1" ]]; then
  @bookmark_colorize "$(egrep "\|${1}$" <<< "$bookmark_file" | awk -F'|' '{print $1}')"
  echo
else
  printf "$bookmark_file" | while read line; do
    bookmark_path="${line%|*}"
    bookmark_name="${line#*|}"

    echo "${bookmark_name}|$(@bookmark_colorize $bookmark_path)"
  done  | column -s '|' -o '    ' -t
fi
